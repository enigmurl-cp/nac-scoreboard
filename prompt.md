As part of my replay of NAC / similar contest, i need to be able to scrape a website and get a list of teams, their accepted submissions, the names of the problems, the times of submissions, the number of bombs and similar data. The schema looks like this: { "name": "NAC 2020", "duration": 18000, "freeze": 15000, "problems": ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M"], "teams": [ { "name": "Fallen Star", "university": "UCSD", "logo": "", "submissions": { "A": { "time": 1145, "tries": 2, "first": true }, "B": { "time": 11766, "tries": 1 }, "C": null, "D": { "time": 15123, "tries": 3 }, "E": null } }, { "name": "Scalm 2 ", "university": "California Institute of Technology", "logo": "", "submissions": { "A": { "time": 1145, "tries": 3 }, "B": { "time": 11766, "tries": 1 }, "C": null, "D": { "time": 15123, "tries": 3 }, "E": null } } ] }. Note that time is in seconds, and tries includes the accepted submission. Also, first is only present if the team was the first to solve the problem.

I need you to be able to parse https://nerc.itmo.ru/archive/2024/standings.html and convert the data of the html into the format that i require. For instance, here is a particular row of the html: <tr class="row01"><td class="rankl">1</td><td class="party">HSE: Surstrumien bobra (Novikov, Stepanov, Mikhnenko)</td><td><i>+<s><br>18:28</s></i></td><td><i>+<s><br>170:05</s></i></td><td>.</td><td><i>+<s><br>74:35</s></i></td><td><i>+1<s><br>56:34</s></i></td><td><i>+<s><br>17:04</s></i></td><td><i>+<s><br>134:52</s></i></td><td>.</td><td><i>+1<s><br>228:56</s></i></td><td><i>+<s><br>49:34</s></i></td><td><i class="first-to-solve">+<s><br>247:34</s></i></td><td><b>-10</b></td><td><i>+<s><br>110:31</s></i></td><td>10</td><td class="penalty">1143</td> <td class="rank"><span class="winner">Q</span><span class="winner">G</span><span class="award4">I</span></td></tr> Here's an example script for a different judge that accomplishes the goal to get you an idea of what i need import json import requests from bs4 import BeautifulSoup import sys import re def min_to_sec(m): return int(float(m) * 60) def parse_domjudge(url): print(f"Fetching {url} ...") f = open("inner.html") html = f.read() soup = BeautifulSoup(html, "html.parser") # DOMjudge scoreboard rows rows = soup.find_all("tr") if not rows: print("ERROR: No DOMjudge rows found.") sys.exit(1) teams = [] problems_count = None for row in rows: if not row.get("id") or not row["id"].startswith("team:") or "mobile" in row["id"]: continue cells = row.find_all("td") if not cells: continue # Column structure: # 0 = rank # 1 = heart # 2 = affiliation logo # 3 = team name cell # 4 = solved # 5 = penalty # # Problem cells start at index 6 rank = int(cells[0].text.strip()) solved = int(cells[4].text.strip()) penalty = int(cells[5].text.strip()) # Team name inside <td class="scoretn ..."> team_td = cells[3] team_name = team_td.get_text(" ", strip=True) if "Division" in team_name: team_name = team_name[team_name.index("Division") + len("Division"):] # Use team name as university (DOMjudge doesn't necessarily include cleaned affiliation) university = team_name # Problem cells: problem_cells = cells[6:] if problems_count is None: problems_count = len(problem_cells) submissions = {} for idx, pc in enumerate(problem_cells): prob_letter = chr(ord("A") + idx) div = pc.find("div") if not div: continue classes = div.get("class", []) # Skip incorrect cells if "score_incorrect" in classes: continue # Only accept score_correct if "score_correct" not in classes and "score_first" not in classes: continue # Has time + tries inside time_text = div.contents[0].strip() # Empty or non-number → skip if not time_text.isdigit(): continue time_min = int(time_text) time_sec = min_to_sec(time_min) # Find tries in <span>… "2 tries" span = div.find("span") tries = None if span: m = re.search(r"(\d+)\s+tr", span.text.strip()) if m: tries = int(m.group(1)) if tries is None: continue is_first = "score_first" in classes submissions[prob_letter] = { "time": time_sec, "tries": tries, "first": is_first } teams.append({ "name": team_name, "university": university, "submissions": submissions }) problems = [chr(ord("A") + i) for i in range(problems_count)] return { "duration": 5 * 3600, # NAC and most DOMjudge ICPCs are 5h "freeze": 4 * 3600, # NAC and most DOMjudge ICPCs are 5h "problems": problems, "teams": teams } if __name__ == "__main__": if len(sys.argv) != 3: print("Usage: python domjudge_to_replay_json.py <domjudge-scoreboard-url> <output.json>") sys.exit(1) url = sys.argv[1] outfile = sys.argv[2] data = parse_domjudge(url) with open(outfile, "w") as f: json.dump(data, f, indent=2) print(f"Saved replay JSON to {outfile}")
